var PagerTemplateConstants=function(){function e(){}return e.PAGE_TO_FIRST_PLACEHOLDER="${settings.firstPage}",e.PAGE_TO_LAST_PLACEHOLDER="${settings.lastPage}",e.PAGE_RANGE_PLACEHOLDER="${pageRange.displayPage}",e.DEFAULT_PAGE_TO_BEGINNING_HTML="|<",e.DEFAULT_PAGE_TO_END_HTML=">|",e.DEFAULT_PAGE_RETREAT_HTML="<",e.DEFAULT_PAGE_ADVANCE_HTML=">",e.DEFAULT_PAGE_TO_FIRST_HTML=e.PAGE_TO_FIRST_PLACEHOLDER,e.DEFAULT_PAGE_TO_LAST_HTML=e.PAGE_TO_LAST_PLACEHOLDER,e.DEFAULT_PAGE_FILLER_BEFORE_HTML="...",e.DEFAULT_PAGE_FILLER_AFTER_HTML="...",e.DEFAULT_PAGE_RANGE_HTML=e.PAGE_RANGE_PLACEHOLDER,e}(),Pager=function(){function e(e,t,a){this.noopLogger={debug:this.noop,error:this.noop,exception:this.noop,info:this.noop,log:this.noop,trace:this.noop,warn:this.noop},this.logger=a||this.noopLogger,this.logger.debug("constructor"),this.options=this.createOptions(e),this.currentPage=this.options.firstPage,this.updatePagerState(this.options),this.parentElement=t||document.body;var i=this.buildPager(this.options);this.parentElement.appendChild(i)}return e.prototype.pageTo=function(e){this.logger.debug("pageTo("+e+")"),e>0&&e<=this.totalNumberOfPages&&(this.displayPageInput=this.convertFromDecimal(e),this.currentPage=this.displayPageInput,this.updatePager())},e.prototype.updatePager=function(){this.updatePagerState(this.options);var e=this.buildPager(this.options),t=document.getElementById("pager-container-"+this.id);t?t.parentElement.replaceChild(e,t):this.parentElement.appendChild(e),this.parentElement.dispatchEvent(new CustomEvent("page",{detail:{id:this.id,pageToPage:this.currentPage}}))},e.prototype.updateCurrentPage=function(){this.logger.debug("updateCurrentPage");var e=this.pageInputIsValid(),t=document.getElementById("page-input-"+this.id);e?(this.pageTo(this.convertToDecimal.call(this,this.displayPageInput)),t.classList.contains("invalid")&&t.classList.remove("invalid")):t.classList.contains("invalid")||t.classList.add("invalid")},e.prototype.pageInputIsValid=function(){this.logger.debug("pageInputIsValid");var e=this.convertToDecimal(this.displayPageInput);return!!e&&!isNaN(e)&&e>=1&&e<=this.totalNumberOfPages},Object.defineProperty(e.prototype,"displayPageInput",{get:function(){return parseInt(this.input.value,10)},set:function(e){this.input&&(this.input.value=e.toString())},enumerable:!0,configurable:!0}),e.prototype.createOptions=function(e){return this.logger.debug("createOptions"),e=e||{},e.firstPage=e.firstPage||1,e.convertFromDecimal=e.convertFromDecimal||this.convertFromDecimal.bind(this),e.convertToDecimal=e.convertToDecimal||this.convertToDecimal.bind(this),e.totalNumberOfRecords=e.totalNumberOfRecords||0,e.enableFirstLastPageArrows=e.enableFirstLastPageArrows||!1,e.enablePageArrows=e.enablePageArrows||!1,e.enablePageInput=e.enablePageInput||!1,e.maximumNumberOfExplicitPagesToDisplay=Math.max(e.maximumNumberOfExplicitPagesToDisplay||7,5),e.pageSize=e.pageSize||10,e.id=e.id||Math.floor(1e4*Math.random()).toString(),e},e.prototype.createTemplates=function(e){return this.logger.debug("createTemplates"),e=e||{},e.pageToBeginningHtml=e.pageToBeginningHtml||PagerTemplateConstants.DEFAULT_PAGE_TO_BEGINNING_HTML,e.pageRetreatHtml=e.pageRangeHtml||PagerTemplateConstants.DEFAULT_PAGE_RETREAT_HTML,e.pageToFirstHtml=e.pageToFirstHtml||PagerTemplateConstants.DEFAULT_PAGE_TO_FIRST_HTML,e.pageFillerBeforeHtml=e.pageFillerBeforeHtml||PagerTemplateConstants.DEFAULT_PAGE_FILLER_BEFORE_HTML,e.pageRangeHtml=e.pageRangeHtml||PagerTemplateConstants.DEFAULT_PAGE_RANGE_HTML,e.pageFillerAfterHtml=e.pageFillerAfterHtml||PagerTemplateConstants.DEFAULT_PAGE_FILLER_AFTER_HTML,e.pageToLastHtml=e.pageToLastHtml||PagerTemplateConstants.DEFAULT_PAGE_TO_LAST_HTML,e.pageAdvanceHtml=e.pageAdvanceHtml||PagerTemplateConstants.DEFAULT_PAGE_ADVANCE_HTML,e.pageToEndHtml=e.pageToEndHtml||PagerTemplateConstants.DEFAULT_PAGE_TO_END_HTML,e},e.prototype.convertFromDecimal=function(e){return this.logger.debug("convertFromDecimal("+e+")"),e},e.prototype.convertToDecimal=function(e){return this.logger.debug("convertToDecimal("+e+")"),parseInt(e,10)},e.prototype.noop=function(){},e.prototype.updatePagerState=function(e){this.logger.debug("updatePagerState"),this.totalNumberOfPages=e.pageSize&&e.totalNumberOfRecords?e.totalNumberOfRecords/e.pageSize:0,this.id=e.id,this.convertFromDecimal=e.convertFromDecimal.bind(this),this.convertToDecimal=e.convertToDecimal.bind(this),this.maximumNumberOfExplicitPagesToDisplay=e.maximumNumberOfExplicitPagesToDisplay,this.canPageBackward=this.currentPage>e.firstPage,this.canPageForward=this.currentPage<this.totalNumberOfPages,this.hasMorePagesBackward=!1,this.hasMorePagesForward=!1,this.currentPage>e.firstPage+2&&this.totalNumberOfPages>this.maximumNumberOfExplicitPagesToDisplay&&(this.hasMorePagesBackward=!0),this.currentPage<this.totalNumberOfPages-2&&this.totalNumberOfPages>this.maximumNumberOfExplicitPagesToDisplay&&(this.hasMorePagesForward=!0);var t,a;if(this.hasMorePagesBackward||this.hasMorePagesForward)if(this.hasMorePagesBackward)if(this.hasMorePagesForward){var i=this.maximumNumberOfExplicitPagesToDisplay%2===1,r=Math.ceil((this.maximumNumberOfExplicitPagesToDisplay-5)/2);this.currentPage+r===this.totalNumberOfPages-2?(this.hasMorePagesForward=!1,t=this.currentPage-r,a=this.totalNumberOfPages):i?(t=this.currentPage-r,a=this.currentPage+r+1):(t=this.currentPage-r+1,a=this.currentPage+r+1)}else a=this.totalNumberOfPages,t=this.totalNumberOfPages-this.maximumNumberOfExplicitPagesToDisplay+3;else t=e.firstPage+1,a=this.maximumNumberOfExplicitPagesToDisplay-1;else t=e.firstPage+1,a=this.totalNumberOfPages;for(this.pagesRange=[];t<a;t++)this.pagesRange.push({displayPage:e.convertFromDecimal(t),page:t})},e.prototype.buildPager=function(e){var t=this,a=this.createTemplates(e.templates),i=[],r=[],s=this.totalNumberOfPages>e.firstPage,n=e.convertFromDecimal(e.firstPage),o=e.convertFromDecimal(this.totalNumberOfPages);if(e.enableFirstLastPageArrows&&(i.push(this.buildButton(a.pageToBeginningHtml,"arrow-page-to-beginning",!this.canPageBackward,this.pageTo.bind(this,e.firstPage))),r.unshift(this.buildButton(a.pageToEndHtml,"arrow-page-to-end",!this.canPageForward,this.pageTo.bind(this,this.totalNumberOfPages)))),e.enablePageArrows&&(i.push(this.buildButton(a.pageRetreatHtml,"arrow-page-retreat",!this.canPageBackward,this.pageTo.bind(this,this.currentPage-1))),r.unshift(this.buildButton(a.pageAdvanceHtml,"arrow-page-advance",!this.canPageForward,this.pageTo.bind(this,this.currentPage+1)))),s){var g=a.pageToFirstHtml.replace(PagerTemplateConstants.PAGE_TO_FIRST_PLACEHOLDER,n.toString());i.push(this.buildButton(g,"page-to-beginning",!this.canPageBackward,this.pageTo.bind(this,e.firstPage))),g=a.pageToLastHtml.replace(PagerTemplateConstants.PAGE_TO_LAST_PLACEHOLDER,o.toString()),r.unshift(this.buildButton(g,"arrow-page-end",!this.canPageForward,this.pageTo.bind(this,this.totalNumberOfPages)))}if(this.hasMorePagesBackward&&i.push(this.buildButton(a.pageFillerBeforeHtml,"page-filler-before")),this.hasMorePagesForward&&r.unshift(this.buildButton(a.pageFillerAfterHtml,"page-filler-after")),this.pagesRange.forEach(function(e){var r=a.pageRangeHtml.replace(PagerTemplateConstants.PAGE_RANGE_PLACEHOLDER,e.displayPage);i.push(t.buildButton(r,"page-"+e.page,t.currentPage===e.page,t.pageTo.bind(t,e.page)))}),e.enablePageInput){var p=document.createElement("input");p.id="page-input-"+this.id,p.value=this.currentPage.toString(),p.addEventListener("blur",this.updateCurrentPage.bind(this),!1),this.input=p,r.push(p)}var l=document.createElement("div");return l.id="pager-container-"+this.id,i.concat(r).forEach(function(e){l.appendChild(e)}),l},e.prototype.buildButton=function(e,t,a,i){void 0===a&&(a=!0),void 0===i&&(i=null);var r=document.createElement("button");return r.id=t,a&&(r.disabled=!0),i&&r.addEventListener("click",i,!1),r.innerHTML=e,r},e}();